(function(t){function e(e){for(var n,o,a=e[0],u=e[1],c=e[2],l=0,f=[];l<a.length;l++)o=a[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);h&&h(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,a=1;a<s.length;a++){var u=s[a];0!==r[u]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/emphasoft-autch-page/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var h=u;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"3fbc":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("h1",[t._v("web-приложение Emphasoft")]),s("router-view")],1)},i=[],o=(s("5c0b"),s("2877")),a={},u=Object(o["a"])(a,r,i,!1,null,null,null),c=u.exports,h=s("8c4f"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapp"},[s("div",{staticClass:"auth"},[s("div",{ref:"authblock",staticClass:"auth-block"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"auth-block__infoBlock"},t._l(t.messInfo,(function(e,n){return s("p",{key:n},[t._v(t._s(e))])})),0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"auth-block__inp",attrs:{type:"text",placeholder:"Имя пользователя"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userPass,expression:"userPass"}],staticClass:"auth-block__inp",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.userPass},on:{input:function(e){e.target.composing||(t.userPass=e.target.value)}}}),s("button",{staticClass:"auth-block__btn",on:{click:t.authClick}},[t._v("Войти")])])]),s("div",{staticClass:"users-list"},[t.filterShow?s("UsersList",{ref:"toplist",attrs:{token:t.token}}):t._e()],1)])},f=[],p=(s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-list"},[s("div",{staticClass:"user-list__header"},["sortUp"==t.sortName?s("div",[s("span",{staticClass:"user-list__header_title mdi mdi-18px mdi-sort-numeric-descending",on:{click:function(e){return t.sortID()}}},[t._v("ID")])]):s("div",[s("span",{staticClass:"user-list__header_title mdi mdi-18px mdi-sort-numeric-ascending",on:{click:function(e){return t.sortID()}}},[t._v("ID")])]),t.fShow?s("div",[s("span",{staticClass:"user-list__header_title mdi mdi-18px mdi-filter-remove filerActive",on:{click:function(e){t.fShow=!1}}},[t._v("User name")])]):s("div",[s("span",{staticClass:"user-list__header_title mdi mdi-18px mdi-filter",on:{click:function(e){t.fShow=!0,t.addFocusToInp()}}},[t._v("User name")])]),t._m(0)]),t.fShow?s("div",{staticClass:"filter-line"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userNameSearch,expression:"userNameSearch"}],ref:"inpFocus",staticClass:"user-list__header_filter-inp",attrs:{type:"text",placeholder:"Введите имя"},domProps:{value:t.userNameSearch},on:{input:function(e){e.target.composing||(t.userNameSearch=e.target.value)}}})]):t._e(),t._l(t.uList[0],(function(e){return s("div",{key:e.id,staticClass:"user-list__content"},[s("span",[t._v(t._s(e.id))]),s("span",[t._v(t._s(e.username))]),s("span",[t._v(t._s(e.first_name))])])}))],2)}),d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("First name")])])}],m=(s("4de4"),s("c975"),s("2909")),v={name:"UsersList",props:{token:String},data:function(){return{usersList:[],cacheUsersList:[],sortName:"",fShow:!1,userNameSearch:""}},watch:{fShow:function(){this.userNameSearch="",this.usersList[0]=Object(m["a"])(this.cacheUsersList[0])}},computed:{uList:function(){var t=this;return 0==this.userNameSearch.length?(console.log("Пока пустое значение в поисковом имени"),this.usersList.length&&this.usersList[0].length!=this.cacheUsersList[0].length&&(this.usersList[0]=Object(m["a"])(this.cacheUsersList[0]))):this.usersList[0]=this.cacheUsersList[0].filter((function(e){var s=t.userNameSearch.toLowerCase();if(-1!=e.username.toLowerCase().indexOf(s))return e})),this.usersList}},methods:{autorization:function(){var t={};return t.headers||(t.headers={}),t.headers.Authorization="Token ".concat(this.token),t},requestUserList:function(t){var e=this;console.log("Пробуем авторизовано получить список пользователей");var s="https://emphasoft-test-assignment.herokuapp.com/api/v1/users/";fetch(s,t).then((function(t){return t.json()})).then((function(t){e.usersList.push(t),console.log(e.usersList),e.cacheUsersList.push(e.usersList[0])}))},sortID:function(){if(this.usersList.length)switch(this.sortName){case"sortUp":this.usersList[0].sort((function(t,e){return t.id>e.id?1:e.id>t.id?-1:0})),this.sortName="sortDown";break;case"sortDown":this.usersList[0].sort((function(t,e){return t.id<e.id?1:e.id<t.id?-1:0})),this.sortName="sortUp";break;default:this.usersList[0].sort((function(t,e){return t.id>e.id?1:e.id>t.id?-1:0})),this.sortName="sortDown"}},addFocusToInp:function(){var t=this;this.$nextTick((function(){t.$refs.inpFocus.focus()}))}},mounted:function(){this.requestUserList(this.autorization())}},_=v,w=(s("a171"),Object(o["a"])(_,p,d,!1,null,"5d7252fa",null)),g=w.exports,b={name:"Auth",components:{UsersList:g},data:function(){return{userName:"",userPass:"",messInfo:[],showInfo:!1,filterShow:!1,token:""}},methods:{authClick:function(){this.messInfo.length=0,this.showInfo=!1;var t=this.validName(this.userName),e=this.validPass(this.userPass);t||e?(t&&this.messInfo.push(t),e&&this.messInfo.push(e),this.showError(this.messInfo)):this.sendRequest(this.userName,this.userPass)},validName:function(t){return"string"!==typeof t?"Введённое значение имени не string":0==t.length?"Введите имя":t.length>150?"Введённое имя больше 150 символов, что недопустимо":/^[\w.@+-]+$/.test(t)?"":"Некорректное значение имени"},validPass:function(t){return"string"!==typeof t?"Введённый пароль не string":0==t.length?"Введите пароль":t.length<8?"Пароль не может быть меньше 8 символов":t.length>128?"Слишком длинный пароль":/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(t)?"":"Недопустимое значение пароля (должна быть хоть одна Заглавная английская буква и цифра)"},showError:function(t){var e=this;t.length>0?this.showInfo=!0:this.showInfo=!1,setTimeout((function(){e.messInfo.length=0,e.showInfo=!1}),5e3)},sendRequest:function(t,e){var s=this,n={username:t,password:e},r="https://emphasoft-test-assignment.herokuapp.com/api-token-auth/";fetch(r,{method:"post",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){console.log("Request succeeded with JSON response",t),t.token?(console.log("Доступ получен"),s.accessOk(t.token),s.clearInp(),s.filterShow=!0,s.scroll()):(console.log("Неверный логин или пароль"),s.accessOk("no"))})).catch((function(t){console.log("Request failed",t)}))},accessOk:function(t){var e=this;console.log(t),this.showInfo=!0,"no"!=t?(this.messInfo.push("Доступ получен"),this.token=t):this.messInfo.push("Неверный логин или пароль"),setTimeout((function(){e.messInfo.length=0,e.showInfo=!1}),5e3)},clearInp:function(){this.userName="",this.userPass=""},scroll:function(){setTimeout((function(){var t=window.innerHeight-40;window.scrollTo({top:t,behavior:"smooth"})}),0)}}},k=b,N=(s("7d07"),Object(o["a"])(k,l,f,!1,null,"08094d24",null)),L=N.exports;n["a"].use(h["a"]);var y=[{path:"/",name:"Auth",component:L}],I=new h["a"]({mode:"history",base:"/emphasoft-autch-page/",routes:y}),S=I,C=s("2f62");n["a"].use(C["a"]);var O=new C["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:S,store:O,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var n=s("9c0c"),r=s.n(n);r.a},"7d07":function(t,e,s){"use strict";var n=s("3fbc"),r=s.n(n);r.a},"9c0c":function(t,e,s){},a171:function(t,e,s){"use strict";var n=s("ec7b"),r=s.n(n);r.a},ec7b:function(t,e,s){}});
//# sourceMappingURL=app.df708fd9.js.map